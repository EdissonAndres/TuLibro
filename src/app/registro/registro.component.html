<app-header></app-header>

<section class="register">
  <h2>Registrarse</h2>
  <section>
    <section class="register__container">
      <form class="register__container--form" [formGroup]="form">
        <mat-form-field class="input">
          <mat-label>DNI</mat-label>
          <input type="text" matInput [formControl]="idFormControl">
          <mat-error *ngIf="idFormControl.hasError('maxlength') && !idFormControl.hasError('pattern') && !idFormControl.hasError('required')">
            Este campo solo admite maximo 15 digitos 
          </mat-error>
          <mat-error *ngIf="idFormControl.hasError('pattern') && !idFormControl.hasError('required')">
            Este campo solo admite digitos numericos
          </mat-error>
          <mat-error *ngIf="idFormControl.hasError('required')">
            Este campo es necesario
          </mat-error>
        </mat-form-field>

        <mat-form-field class="input">
          <mat-label>Nombres</mat-label>
          <input type="text" matInput [formControl]="nombresFormControl">
          <mat-error *ngIf="nombresFormControl.hasError('pattern') && !nombresFormControl.hasError('maxlength') && !nombresFormControl.hasError('required')">
            Este campo solo admite caracteres alfabeticos o espacios simples
          </mat-error>
          <mat-error *ngIf="nombresFormControl.hasError('maxlength') && !nombresFormControl.hasError('required')">
            Este campo solo admite maximo 25 caracteres
          </mat-error>
          <mat-error *ngIf="nombresFormControl.hasError('required')">
            Este campo es necesario
          </mat-error>
        </mat-form-field>

        <mat-form-field class="input">
          <mat-label>Apellidos</mat-label>
          <input type="text" matInput [formControl]="apellidosFormControl">
          <mat-error *ngIf="apellidosFormControl.hasError('pattern') && !apellidosFormControl.hasError('maxlength') && !apellidosFormControl.hasError('required')">
            Este campo solo admite caracteres alfabeticos o espacios simples
          </mat-error>
          <mat-error *ngIf="apellidosFormControl.hasError('maxlength') && !apellidosFormControl.hasError('required')">
            Este campo solo admite maximo 25 caracteres
          </mat-error>
          <mat-error *ngIf="apellidosFormControl.hasError('required')">
            Este campo es necesario
          </mat-error>
        </mat-form-field>

        <mat-form-field class="input">
          <mat-label>Fecha de nacimiento</mat-label>
          <input matInput [min]="minDate" [max]="maxDate" [matDatepicker]="picker" [formControl]="fechaNFormControl">
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
          <mat-error *ngIf="fechaNFormControl.invalid">
            Fecha invalida asegurece de ingresar una fecha mayor a los 18 años y menor a los 120
          </mat-error>
        </mat-form-field>

        <mat-form-field class="input">
          <mat-label>Lugar de nacimiento</mat-label>
          <mat-select [formControl]="lugarNFormControl" name="Lugar de nacimiento">
            <mat-option *ngFor="let pais of paises" [value]="pais.name">
              {{pais.name}}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="generoFormControl.hasError('required')">
            Este campo es necesario
          </mat-error>
        </mat-form-field>

        <mat-form-field class="input">
          <mat-label>Direccion</mat-label>
          <input type="text" matInput [formControl]="direccionFormControl">
          <mat-error *ngIf="direccionFormControl.hasError('maxlength') && !direccionFormControl.hasError('required')">
            Este campo solo admite maximo 100 caracteres
          </mat-error>
          <mat-error *ngIf="direccionFormControl.hasError('required')">
            Este campo es necesario 
          </mat-error>
        </mat-form-field>
      </form>

      <form class="register__container--form1" [formGroup]="form">

        <mat-form-field class="input">
          <mat-label>Genero</mat-label>
          <mat-select [formControl]="generoFormControl" name="genero">
            <mat-option *ngFor="let genero of generos" [value]="genero.value">
              {{genero.viewValue}}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="generoFormControl.hasError('required')">
            Este campo es necesario
          </mat-error>
        </mat-form-field>

        <mat-form-field class="input">
          <mat-label>Preferencias</mat-label>
          <mat-select [formControl]="preferenciasFormControl" multiple>
            <mat-select-trigger>
              {{preferenciasFormControl.value ? preferenciasFormControl.value[0] : ''}}
              <span *ngIf="preferenciasFormControl.value?.length > 1" class="example-additional-selection">
                (+{{preferenciasFormControl.value.length - 1}} {{preferenciasFormControl.value?.length === 2 ? 'otro' : 'otros'}})
              </span>
            </mat-select-trigger>
            <mat-option *ngFor="let preferencia of preferencias" [value]="preferencia">{{preferencia}}</mat-option>
          </mat-select>
          <mat-error *ngIf="preferenciasFormControl.hasError('required')">
            Este campo es necesario
          </mat-error>
        </mat-form-field>

        <mat-form-field class="input">
          <mat-label>Usuario</mat-label>
          <input type="text" matInput [formControl]="usuarioFormControl">
          <mat-error *ngIf="usuarioFormControl.hasError('pattern') && !usuarioFormControl.hasError('maxlength') && !usuarioFormControl.hasError('required')">
            Este campo no admite espacios en blanco
          </mat-error>
          <mat-error *ngIf="usuarioFormControl.hasError('maxlength') && !usuarioFormControl.hasError('required')">
            Este campo solo admite maximo 15 caracteres
          </mat-error>
          <mat-error *ngIf="usuarioFormControl.hasError('required')">
            Este campo es necesario
          </mat-error>
        </mat-form-field>

        <mat-form-field class="input">
          <mat-label>Correo Electronico</mat-label>
          <input type="email" matInput [formControl]="correoFormControl" placeholder="example@correo.com">
          <mat-error *ngIf="correoFormControl.hasError('email') && !correoFormControl.hasError('required')">
            Por favor ingrese una direccion de correo correcta
          </mat-error>
          <mat-error *ngIf="correoFormControl.hasError('required')">
            Este campo es necesario
          </mat-error>
        </mat-form-field>

        <mat-form-field class="input">
          <mat-label>Contraseña</mat-label>
          <input type="password" matInput [formControl]="contrasenFormControl">
          <mat-error *ngIf="contrasenFormControl.hasError('pattern') && !contrasenFormControl.hasError('required')">
            Requiere min 8 caracteres, max 16, entre ellos al menos una mayuscula, una minuscula y un numero, sin espacios
          </mat-error>
          <mat-error *ngIf="contrasenFormControl.hasError('required')">
            Este campo es necesario
          </mat-error>
        </mat-form-field>

        <mat-form-field class="input">
          <mat-label>Confirmar contraseña</mat-label>
          <input type="password" matInput [formControl]="confirmarContraFormControl">
          <mat-error *ngIf="(confirmarContraFormControl.value === contrasenFormControl.value) && !confirmarContraFormControl.hasError('required')">
            Las contraseñas coinciden 
          </mat-error>
          <mat-error *ngIf="confirmarContraFormControl.hasError('required')">
            Este campo es necesario
          </mat-error>
        </mat-form-field>
      
      </form>
    </section>

    <div class="register__phrase">
      <div class="register__phrase--icono">
        <img  src="./../../assets/Icono.png" alt="tu libro">
        <p>¡Disfruta de todos tus libros favoritos a un solo click!</p>
      </div>
      <button (click)="registrar()" class="button">Registrarme</button>
    </div>

  </section>
</section>

<app-footer></app-footer>